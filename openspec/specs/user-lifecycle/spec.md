# user-lifecycle 规范

## 目的
待定 - 通过归档变更 add-lifecycle-operations-foundation 创建。请在归档后更新目的。

## 需求
### 需求：AARRR 生命周期阶段定义

系统应实现 AARRR（海盗指标）用户生命周期模型。

#### 场景：获客阶段定义

- **当**系统处理获客阶段工作流时
- **则**该阶段代表用户获取渠道和活动
- **并且**跟踪的指标包括：访客数量、注册率、获客成本、渠道归因
- **并且**常见操作包括：着陆页展示、注册表单、推荐跟踪

#### 场景：激活阶段定义

- **当**系统处理激活阶段工作流时
- **则**该阶段代表首次用户体验和价值交付
- **并且**跟踪的指标包括：入门完成率、首次价值时间、功能采用率
- **并且**常见操作包括：教程完成、档案设置、首次交易

#### 场景：留存阶段定义

- **当**系统处理留存阶段工作流时
- **则**该阶段代表持续的用户参与
- **并且**跟踪的指标包括：日活跃用户、周活跃用户、流失率、参与度分数
- **并且**常见操作包括：提醒通知、重新参与活动、习惯养成

#### 场景：变现阶段定义

- **当**系统处理变现阶段工作流时
- **则**该阶段代表货币化活动
- **并且**跟踪的指标包括：转化率、平均订单价值、客户生命周期价值、单用户收入
- **并且**常见操作包括：追加销售优惠、高级升级、购买提醒

#### 场景：推荐阶段定义

- **当**系统处理推荐阶段工作流时
- **则**该阶段代表病毒式增长和倡导
- **并且**跟踪的指标包括：推荐率、病毒系数、单用户分享数、推荐转化率
- **并且**常见操作包括：推荐计划邀请、社交分享提示、激励交付

### 需求：用户细分管理

系统应支持定义和管理用户细分以进行定向操作。

#### 场景：人口统计细分

- **当**运营人员定义人口统计细分时
- **则**可用属性包括：年龄范围、性别、位置（国家/城市）、语言、设备类型
- **并且**细分可以组合多个人口统计标准
- **并且**细分成员资格基于用户档案数据进行评估

#### 场景：行为细分

- **当**运营人员定义行为细分时
- **则**可用属性包括：会话频率、会话持续时间、功能使用、购买频率、内容偏好
- **并且**支持基于时间的行为模式（例如，过去 7 天活跃）
- **并且**可以计算参与度级别（低、中、高）

#### 场景：生命周期细分

- **当**运营人员定义生命周期细分时
- **则**可用类别包括：新用户（< 7 天）、活跃用户（最近参与）、风险用户（参与度下降）、休眠用户（> 30 天不活跃）、流失用户（> 90 天无活动）
- **并且**细分根据用户行为自动更新
- **并且**细分之间的过渡规则可配置

#### 场景：价值细分

- **当**运营人员定义价值细分时
- **则**可用属性包括：客户生命周期价值、购买金额、订阅层级、忠诚度积分
- **并且**可以定义价值层级（铜、银、金、白金）
- **并且**细分阈值可配置

### 需求：用户旅程映射

系统应支持跨生命周期阶段映射用户旅程。

#### 场景：定义旅程路径

- **当**运营人员创建用户旅程时
- **则**旅程阶段可以排序（获客 → 激活 → 留存 → 变现 → 推荐）
- **并且**每个阶段可以有多个触点
- **并且**触点包括：渠道（电子邮件、SMS、推送、应用内）、时机、内容

#### 场景：旅程流可视化

- **当**运营人员查看用户旅程时
- **则**旅程显示为流程图
- **并且**每个阶段显示转化率和流失点
- **并且**指示每个阶段的用户量
- **并且**突出显示瓶颈

#### 场景：旅程优化建议

- **当**用户旅程转化率较低时
- **则**系统提供优化建议
- **并且**建议包括：时机调整、渠道变更、内容改进
- **并且**提供 A/B 测试建议

### 需求：生命周期指标跟踪

系统应跟踪和计算每个工作流的生命周期指标。

#### 场景：转化率计算

- **当**工作流跨生命周期阶段执行时
- **则**计算阶段之间的转化率
- **并且**公式：（完成阶段的用户数 / 进入阶段的用户数）× 100
- **并且**随时间跟踪转化率以进行趋势分析

#### 场景：用户进展跟踪

- **当**用户在生命周期阶段中移动时
- **则**跟踪进展速度（阶段之间的时间）
- **并且**计算平均值、中位数和百分位数
- **并且**标记慢速进展以进行干预

#### 场景：队列分析

- **当**分析用户生命周期表现时
- **则**队列分析可按注册日期、获取渠道、细分进行
- **并且**生成队列留存曲线
- **并且**队列比较识别表现最佳的组

### 需求：生命周期阶段过渡

系统应管理生命周期阶段之间的用户过渡。

#### 场景：自动阶段过渡

- **当**用户满足过渡标准时
- **则**用户自动移动到下一个生命周期阶段
- **并且**过渡事件触发关联的工作流
- **并且**记录过渡历史

#### 场景：手动阶段分配

- **当**运营人员手动分配生命周期阶段时
- **则**分配覆盖自动过渡
- **并且**需要手动分配的原因
- **并且**记录手动分配以供审计

#### 场景：阶段回退处理

- **当**用户回退到先前阶段时（例如，活跃 → 风险）
- **则**检测并标记回退
- **并且**触发挽回工作流
- **并且**分析回退原因（参与度降低、负面反馈、竞争流失）
