# 提案: 统一编辑器右侧面板布局

## 概述

当前 BPMN 编辑器的布局存在面板分散的问题：
- 属性面板（Properties Panel）位于右侧固定显示
- Mock 控制面板、Debug 控制面板、Interceptor 控制面板以浮动窗口形式独立显示

这种布局导致：
1. **空间利用率低**: 多个浮动面板同时打开时会遮挡编辑器内容
2. **操作复杂**: 用户需要分别管理多个独立窗口的位置和显示状态
3. **视觉混乱**: 缺乏统一的布局规范，面板之间没有明确的层次关系

## 目标

将所有控制面板和属性面板合并为一个统一的 Tab 切换面板，放置在编辑器右侧：

1. **统一布局**: 将 Properties、Mock、Debug、Interceptor 面板整合到一个右侧面板容器中
2. **Tab 切换**: 使用 Tab 导航在不同功能面板间切换
3. **保持可见性**: 面板固定在右侧，避免浮动窗口遮挡
4. **简化交互**: 用户通过 Tab 切换访问不同功能，减少窗口管理负担

## 业务价值

- **提升用户体验**: 统一的面板布局提供更清晰的信息架构
- **提高开发效率**: 减少在多个浮动窗口间切换的时间
- **界面简洁**: 消除多个浮动窗口带来的视觉噪音
- **空间优化**: 充分利用右侧固定区域，避免遮挡主编辑区

## 范围

### 包含
- 创建统一的右侧面板容器组件
- 实现 Tab 导航功能
- 迁移现有的 4 个面板到 Tab 系统中
- 更新面板的显示/隐藏逻辑
- 调整工具栏按钮的交互行为

### 不包含
- 面板内部功能的修改
- 新增其他类型的控制面板
- 响应式布局适配（移动端）

## 依赖项

- 当前实现: `BpmnEditorPage.vue` 中的布局结构
- 依赖组件: `MockControlPanel.vue`, `DebugControlPanel.vue`, `InterceptorControlPanel.vue`
- 属性面板: bpmn-js 原生 Properties Panel

## 风险评估

### 技术风险
- **bpmn-js Properties Panel 集成**: 原生属性面板需要 DOM 节点挂载，可能需要特殊处理以适配 Tab 切换
- **状态管理复杂度**: 多个面板的状态需要统一管理，避免 Tab 切换时状态丢失

### 缓解措施
- 使用 `<keep-alive>` 保持面板组件状态
- 为 Properties Panel 预留专用挂载点
- 完整的单元测试覆盖 Tab 切换逻辑

## 成功标准

1. 所有 4 个面板（Properties, Mock, Debug, Interceptor）都能在右侧 Tab 面板中正常显示
2. Tab 切换流畅，不会丢失面板状态
3. 工具栏按钮能正确激活对应的 Tab
4. 不再有浮动面板遮挡编辑器内容
5. Properties Panel 功能完全正常（元素选择、属性编辑等）
