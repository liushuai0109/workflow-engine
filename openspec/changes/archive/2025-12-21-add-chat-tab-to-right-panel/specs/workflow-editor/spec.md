# workflow-editor 规范增量

## MODIFIED Requirements

### Requirement: 增强的属性面板

工作流编辑器 MUST 为生命周期运营提供增强的属性面板,并 SHALL 支持统一的右侧面板布局,包含多个功能 Tab。

#### Scenario: 统一右侧面板的 Tab 导航

- **WHEN** 操作员使用工作流编辑器
- **THEN** 右侧面板显示统一的 Tab 导航栏
- **AND** Tab 包括(按顺序):"属性"、"AI 助手"、"Mock"、"Debug"、"拦截器"
- **AND** 点击不同 Tab 时,面板内容相应切换
- **AND** 当前激活的 Tab 有视觉高亮标识

#### Scenario: AI 助手 Tab 功能

- **WHEN** 操作员点击 "AI 助手" Tab
- **THEN** 右侧面板显示 AI 聊天界面
- **AND** 聊天界面加载历史会话消息(如果存在)
- **AND** 操作员可以输入消息与 AI 对话
- **AND** AI 回复显示在聊天区域
- **AND** 支持会话列表查看和切换
- **AND** 支持创建新会话

#### Scenario: AI 助手 Tab 状态保持

- **WHEN** 操作员在 AI 助手 Tab 和其他 Tab 之间切换
- **THEN** 切换回 AI 助手 Tab 时,聊天消息和状态保持不变
- **AND** 输入框中的未发送文本(如果有)也保持不变
- **AND** 会话列表的展开/收起状态保持不变

#### Scenario: 移除独立聊天按钮

- **WHEN** 操作员查看工作流编辑器界面
- **THEN** 顶部工具栏不再显示独立的聊天按钮
- **AND** 页面右下角不再显示浮动客服按钮
- **AND** AI 聊天功能仅通过右侧面板的 "AI 助手" Tab 访问

#### Scenario: AI 聊天界面布局适配

- **WHEN** AI 助手 Tab 被激活
- **THEN** 聊天界面占满整个面板内容区域
- **AND** 聊天界面不显示独立的关闭按钮(通过切换 Tab 来关闭)
- **AND** 聊天界面不显示拖动手柄(固定在面板内)
- **AND** 聊天界面的宽度自适应面板宽度
- **AND** 聊天界面的高度占满可用空间
