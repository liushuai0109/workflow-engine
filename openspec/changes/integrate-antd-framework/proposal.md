# 提案: 前端集成 Ant Design 框架

## Why

当前项目的所有 UI 组件都采用自定义样式实现,存在以下关键问题:

1. **维护成本持续增加**: 每个组件都需要手动编写和维护 CSS 样式,随着项目规模增长,样式代码量急剧增加
2. **设计不一致**: 缺乏统一的设计系统,导致组件间的视觉风格、交互模式不一致,影响用户体验
3. **开发效率低**: 实现复杂交互组件(如表单、表格、对话框)需要大量时间,重复造轮子
4. **可访问性不足**: 自定义组件缺少系统的无障碍支持,不符合 WCAG 标准
5. **响应式支持弱**: 自适应不同屏幕尺寸需要大量额外工作

集成 Ant Design 框架可以根本性地解决这些问题:

- **统一的设计语言**: Ant Design 提供企业级设计规范,确保视觉和交互一致性
- **开箱即用的组件**: 60+ 高质量组件,大幅减少重复开发
- **完善的可访问性**: 内置 ARIA 支持,符合无障碍标准
- **TypeScript 原生支持**: 完整的类型定义,提升开发体验和代码质量
- **持续维护**: 蚂蚁集团官方维护,bug 修复及时,社区活跃

这个变更对项目的长期可维护性和开发效率提升具有战略意义。

## 概述

本提案旨在将 Ant Design Vue 框架集成到前端项目中,替换当前的自定义样式实现。Ant Design 是蚂蚁集团开源的企业级设计体系,提供完整的 Vue 3 组件库,能够提升开发效率、统一视觉风格、提高可维护性。

## 动机

### 当前痛点

1. **维护成本高**: 当前所有组件都使用自定义 CSS 样式,需要手动管理大量样式代码
2. **设计不统一**: 各组件样式缺乏统一的设计语言和规范,视觉效果参差不齐
3. **缺少交互组件**: 项目可能需要复杂的表单、表格、弹窗等组件,从零开发成本高
4. **响应式支持弱**: 自定义样式在不同屏幕尺寸下的适配需要额外工作
5. **无障碍性不足**: 缺少系统的可访问性支持(ARIA 标签等)

### Ant Design 框架优势

1. **企业级设计体系**: 成熟的设计规范,适合 B 端应用
2. **丰富的组件库**: 60+ 高质量组件,覆盖常见业务场景
3. **Vue 3 原生支持**: 基于 Composition API,与项目技术栈完美契合
4. **TypeScript 支持**: 完整的类型定义,提供更好的开发体验
5. **主题定制能力**: 支持品牌色、圆角、阴影等全局样式配置
6. **国际化支持**: 内置 i18n 方案,方便后续扩展
7. **活跃的社区**: 蚂蚁集团官方维护,文档完善,bug 修复及时

## 影响范围

### 前端组件层 (workflow-editor)

- 所有 Vue 组件需要逐步迁移到 Ant Design 组件
- 样式系统从自定义 CSS 迁移到 Ant Design 设计令牌
- 表单、按钮、对话框等交互组件使用 Ant Design 实现

### 主题和样式系统

- 引入 Ant Design 主题配置
- 移除大部分自定义 CSS,保留必要的业务样式
- 配置全局设计变量(颜色、字体、间距等)

### 构建和依赖

- 添加 Ant Design Vue 依赖
- 配置 Vite 插件以支持按需加载
- 调整构建流程以优化打包体积

## 实施策略

### 渐进式迁移

采用渐进式迁移策略,避免一次性重写带来的风险:

1. **阶段 1**: 基础设施搭建
   - 安装 Ant Design 依赖
   - 配置主题和全局样式
   - 创建组件迁移指南

2. **阶段 2**: 新组件优先
   - 新开发的组件直接使用 Ant Design
   - 验证框架集成效果

3. **阶段 3**: 逐步迁移现有组件
   - 按优先级迁移现有组件
   - 保持向后兼容,避免功能回退

4. **阶段 4**: 清理和优化
   - 移除未使用的自定义样式
   - 优化打包体积
   - 更新文档和开发规范

### 迁移优先级

**高优先级** (核心交互组件):
- ChatBox: 使用 Ant Design Modal、Input、Button
- RightPanelContainer: 使用 Ant Design Tabs
- MockControlPanel/DebugControlPanel: 使用 Ant Design Form、Select、DatePicker

**中优先级** (次要功能):
- ExecutionTimeline: 使用 Ant Design Timeline
- VariableWatchPanel: 使用 Ant Design Table
- MockConfigPanel: 使用 Ant Design Form

**低优先级** (BPMN 集成组件):
- BpmnEditor: 保持现有实现,仅迁移工具栏和侧边栏

## 风险评估

### 技术风险

1. **与 bpmn-js 兼容性**:
   - 风险: Ant Design 样式可能影响 BPMN 画布
   - 缓解: 使用 CSS 隔离,BPMN 区域保持独立

2. **打包体积增加**:
   - 风险: 引入 Ant Design 可能增加包体积
   - 缓解: 配置按需加载,只引入使用的组件

3. **学习成本**:
   - 风险: 开发团队需要学习 Ant Design API
   - 缓解: 提供迁移指南和示例代码

### 业务风险

1. **视觉一致性变化**:
   - 风险: UI 风格改变可能影响用户体验
   - 缓解: 渐进迁移,保持核心交互不变

2. **开发时间成本**:
   - 风险: 迁移需要投入额外开发时间
   - 缓解: 采用渐进策略,不影响功能迭代

## 替代方案

### 方案 1: Element Plus
- 优点: 生态成熟,中文文档完善
- 缺点: 设计风格偏 C 端,不如 Ant Design 适合本项目的企业场景

### 方案 2: TDesign
- 优点: 企业级设计,腾讯官方维护
- 缺点: 社区生态不如 Ant Design 成熟,文档和示例相对较少

### 方案 3: 继续自定义样式
- 优点: 完全可控,不依赖第三方
- 缺点: 维护成本持续增加,难以应对复杂交互需求

**推荐选择 Ant Design** 的理由:
- 企业级设计定位与项目契合
- 蚂蚁集团官方维护,质量有保障
- Vue 3 + TypeScript 原生支持
- 社区生态成熟,文档完善
- 已在阿里系和大量企业级应用中验证

## 成功标准

1. **功能完整性**: 所有现有功能在迁移后保持正常工作
2. **视觉一致性**: 所有组件遵循统一的 Ant Design 设计规范
3. **性能指标**: 打包体积增加不超过 30%,首屏加载时间增加不超过 15%
4. **开发效率**: 新组件开发时间减少 40% 以上
5. **代码质量**: 自定义 CSS 代码减少 60% 以上

## 后续考虑

1. **主题定制**: 根据品牌需求定制 Ant Design 主题
2. **组件封装**: 基于 Ant Design 封装业务组件库
3. **设计规范文档**: 建立基于 Ant Design 的项目设计规范
4. **可访问性增强**: 利用 Ant Design 的 ARIA 支持提升无障碍性
