# Engines 目录 - 项目说明

## 已创建的可运行项目

本目录包含三个完整的、可以直接运行的工作流引擎示例项目：

### ✅ 1. FlowGram - React 工作流编辑器
**状态**: 已完成并测试 ✓

**位置**: `engines/flowgram/`

**技术栈**:
- React 18
- Vite 7
- React Flow (@xyflow/react)

**启动方式**:
```bash
cd flowgram
npm install
npm run dev
```

**访问**: http://localhost:5173

**特性**:
- ✓ 可视化工作流编辑器
- ✓ 拖拽式节点操作
- ✓ 预置 6 个示例节点（开始、LLM、条件、成功/失败输出、结束）
- ✓ 小地图导航
- ✓ 背景网格对齐

---

### ✅ 2. n8n - 工作流自动化平台
**状态**: 已完成并配置 ✓

**位置**: `engines/n8n/`

**技术栈**:
- Docker
- n8n 官方镜像

**启动方式**:
```bash
cd n8n
docker-compose up -d
```

**访问**: http://localhost:5678

**特性**:
- ✓ 完整的 n8n 平台
- ✓ 400+ 集成支持
- ✓ Webhook 和定时触发
- ✓ 数据持久化 (Docker Volume)
- ✓ 简化的配置文件

---

### ✅ 3. Dify - LLM 应用开发平台
**状态**: 已完成并配置 ✓

**位置**: `engines/dify/`

**技术栈**:
- Docker Compose
- Python (API)
- TypeScript (Web)
- PostgreSQL + Redis + Weaviate

**启动方式**:
```bash
cd dify/docker
cp .env.example .env
docker-compose up -d
```

**访问**: http://localhost

**特性**:
- ✓ 完整的 Dify 官方配置
- ✓ 多服务架构 (API, Worker, Web, DB, Redis, Vector DB)
- ✓ Nginx 反向代理
- ✓ 数据持久化
- ✓ 环境变量配置模板

---

## 项目文件清单

```
engines/
├── README.md              # 主说明文档（详细对比和使用指南）
├── START.md              # 快速启动指南
├── 项目说明.md           # 本文件
│
├── flowgram/             # FlowGram 项目
│   ├── README.md         # FlowGram 使用文档
│   ├── package.json      # 依赖配置
│   ├── vite.config.js    # Vite 配置
│   └── src/
│       └── App.jsx       # 主应用（包含工作流示例）
│
├── n8n/                  # n8n 项目
│   ├── README.md         # n8n 使用文档
│   ├── docker-compose.yml # Docker 配置
│   └── .env              # 环境变量
│
└── dify/                 # Dify 项目
    ├── README.md         # Dify 官方文档
    ├── QUICKSTART.md     # 快速启动指南（中文）
    └── docker/           # Docker 配置目录
        ├── docker-compose.yaml
        ├── .env.example
        └── ... (其他配置文件)
```

---

## 验证状态

### FlowGram ✅
- [x] 项目创建完成
- [x] 依赖安装成功
- [x] 开发服务器启动测试通过
- [x] 工作流编辑器正常显示
- [x] 文档完善

### n8n ✅
- [x] Docker 配置创建
- [x] 简化配置文件
- [x] 环境变量配置
- [x] 数据持久化设置
- [x] 文档完善

### Dify ✅
- [x] 官方 Docker 配置获取
- [x] 环境变量模板配置
- [x] 多服务编排设置
- [x] Nginx 配置
- [x] 文档完善（中文快速指南）

---

## 快速启动测试

### 测试 FlowGram
```bash
cd engines/flowgram
npm run dev
# 访问 http://localhost:5173 应该看到工作流编辑器
```

### 测试 n8n
```bash
cd engines/n8n
docker-compose up -d
docker-compose ps
# 访问 http://localhost:5678 应该看到 n8n 登录页
```

### 测试 Dify
```bash
cd engines/dify/docker
cp .env.example .env
docker-compose up -d
docker-compose ps
# 等待 2-3 分钟后访问 http://localhost 应该看到初始化页面
```

---

## 资源消耗

### FlowGram
- 内存: ~200MB
- CPU: 低
- 磁盘: ~300MB (含 node_modules)

### n8n
- 内存: ~300MB
- CPU: 低-中
- 磁盘: ~1GB (含 Docker 镜像和数据)

### Dify
- 内存: ~2-3GB
- CPU: 中-高
- 磁盘: ~5GB (含所有服务的镜像和数据)

---

## 适用场景

### FlowGram
✓ 快速原型开发
✓ 前端工作流可视化
✓ 学习工作流编辑器原理
✓ 轻量级演示

### n8n
✓ 企业流程自动化
✓ API 集成和数据同步
✓ 定时任务和 Webhook
✓ 生产环境使用

### Dify
✓ LLM 应用开发
✓ RAG 知识库构建
✓ AI Agent 开发
✓ LLM 应用完整生命周期

---

## 后续开发建议

### FlowGram
- [ ] 添加节点配置面板
- [ ] 实现工作流保存/加载
- [ ] 添加工作流执行引擎
- [ ] 支持自定义节点类型

### n8n
- [ ] 配置自定义节点
- [ ] 集成企业 API
- [ ] 设置生产环境配置（PostgreSQL）
- [ ] 配置 SSL 证书

### Dify
- [ ] 配置 LLM API 密钥
- [ ] 上传知识库文档
- [ ] 创建自定义 Agent
- [ ] 设置生产环境优化

---

## 常见问题

### 1. FlowGram 端口冲突
修改 `vite.config.js` 的 `server.port`

### 2. Docker 内存不足
- Mac: Docker Desktop → Settings → Resources → Memory (设为 6-8GB)
- Linux: 检查 Docker daemon 配置

### 3. Dify 启动慢
- 正常现象，包含多个服务
- 等待 2-3 分钟让所有服务完全启动
- 使用 `docker-compose logs -f` 查看进度

### 4. n8n 数据丢失
- 确保使用 `docker-compose down` 而不是 `down -v`
- `-v` 会删除 volumes

---

## 相关文档

- **总体说明**: `README.md`
- **快速启动**: `START.md`
- **FlowGram 文档**: `flowgram/README.md`
- **n8n 文档**: `n8n/README.md`
- **Dify 文档**: `dify/QUICKSTART.md`

---

## 总结

所有三个项目均已完成配置，可以直接启动运行：

1. **FlowGram**: 纯前端，最轻量，适合快速演示
2. **n8n**: 中等资源消耗，功能完整，适合自动化
3. **Dify**: 资源消耗最大，功能最强，适合 LLM 应用开发

选择合适的框架开始你的工作流开发之旅！
